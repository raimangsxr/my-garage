<div class="settings-container">
    <div class="header">
        <h1>Settings</h1>
        <p class="subtitle">Manage your application preferences</p>
    </div>

    <mat-card class="settings-card">
        <mat-card-content>
            <form [formGroup]="settingsForm" (ngSubmit)="onSubmit()">

                <div class="section-title">General</div>

                <div class="form-row">
                    <mat-form-field appearance="outline">
                        <mat-label>Language</mat-label>
                        <mat-select formControlName="language">
                            <mat-option value="en">English</mat-option>
                            <mat-option value="es">Spanish</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Currency</mat-label>
                        <mat-select formControlName="currency">
                            <mat-option value="EUR">Euro (€)</mat-option>
                            <mat-option value="USD">US Dollar ($)</mat-option>
                            <mat-option value="GBP">British Pound (£)</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="form-row">
                    <mat-form-field appearance="outline">
                        <mat-label>Theme</mat-label>
                        <mat-select formControlName="theme">
                            <mat-option value="dark">Dark</mat-option>
                            <mat-option value="light">Light</mat-option>
                            <mat-option value="system">System Default</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="section-title">API Configuration</div>

                <div class="form-row">
                    <mat-form-field appearance="outline">
                        <mat-label>Google Client ID</mat-label>
                        <input matInput formControlName="google_client_id" placeholder="Enter Google Client ID">
                        <mat-hint>Required for Google Sign-In</mat-hint>
                    </mat-form-field>
                </div>

                <div class="form-row">
                    <mat-form-field appearance="outline">
                        <mat-label>Gemini API Key</mat-label>
                        <input matInput [type]="hideGeminiKey ? 'password' : 'text'" formControlName="gemini_api_key"
                            placeholder="Enter Gemini API Key">
                        <button mat-icon-button matSuffix (click)="hideGeminiKey = !hideGeminiKey"
                            [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideGeminiKey">
                            <mat-icon>{{hideGeminiKey ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-hint>Required for invoice processing</mat-hint>
                    </mat-form-field>
                </div>

                <div class="section-title">Notifications</div>

                <div class="form-row toggle-row">
                    <mat-slide-toggle formControlName="notifications_enabled" color="primary">
                        Enable Notifications
                    </mat-slide-toggle>
                </div>

                <div class="actions">
                    <button mat-raised-button color="primary" type="submit"
                        [disabled]="isLoading || settingsForm.invalid">
                        {{ isLoading ? 'Saving...' : 'Save Changes' }}
                    </button>
                </div>

            </form>
        </mat-card-content>
    </mat-card>
</div>